From b7098d86377e4f18eefe2aee82489e2031c2f959 Mon Sep 17 00:00:00 2001
From: Kei Okada <kei.okada@gmail.com>
Date: Wed, 11 Feb 2015 01:14:01 +0900
Subject: [PATCH 1/2] use --root to find install directory

---
 setup.py | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

diff --git a/setup.py b/setup.py
index 3228d2d..2f115b2 100644
--- a/setup.py
+++ b/setup.py
@@ -43,7 +43,8 @@ def get_files(dir, ext=None):
 
 if sys.platform != 'win32':
     cwd = os.path.join(os.getcwd(), 'doc')
-    s = raw_input('Generate documentation? ')
+    #s = raw_input('Generate documentation? ')
+    s = 'y'
     if s.lower() == 'y' or s.lower() == 'YES':
         print 'Generating documentation'
         p = subprocess.Popen(['./make_docs', 'man', 'html', 'pdf', '-v'],
@@ -179,7 +180,11 @@ class InstallConfigure(install_data):
             self.move_file(os.path.join(self.install_dir, 'share/rtshell',
                     'shell_support.in'), dest)
             with open(dest, 'a') as f:
-                f.writelines((cmd.format(dir=os.path.join(self.install_dir,
+                if self.root:
+                    rtshell_path = os.path.join('/',os.path.relpath(self.install_dir,self.root))
+                else:
+                    rtshell_path = self.install_dir
+                f.writelines((cmd.format(dir=os.path.join(rtshell_path,
                     'share/rtshell')), '\n'))
             self.config_bash_compl()
 
-- 
1.9.1

